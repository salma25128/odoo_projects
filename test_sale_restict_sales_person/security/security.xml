<?xml version="1.0" encoding="utf-8"?>

<!--Implement record-level access control for sale orders, restricting visibility based on the user's assigned sales team.-->
<odoo>
    <record id="sales_management_category" model="ir.module.category">
        <field name="name">Sales Order</field>
    </record>

    <record id="group_manager" model="res.groups">
        <field name="name">Sales Manager</field>
        <field name="category_id" ref="test_sale_restict_sales_person.sales_management_category"/>
    </record>

    <record id="group_salesperson" model="res.groups">
        <field name="name">Salesperson</field>
        <field name="category_id" ref="test_sale_restict_sales_person.sales_management_category"/>
    </record>

    <record id="sale_order_restrict_visiblity" model="ir.rule">
    <field name="name">Salespersons can only see their own team's sale orders</field>
    <field name="model_id" ref="test_sale_restict_sales_person.model_sale_order"/>
    <field name="domain_force">[("team_id", "=", user.sale_team_id.id)]</field>
<!--         <field name="domain_force">[('team_id', 'in', user.sale_team_ids.ids)]</field>-->


    <field name="groups" eval="[(ref('test_sale_restict_sales_person.group_salesperson'))]"/>
    <field name="perm_read" eval="True"/>
    <field name="perm_write" eval="True"/>
    <field name="perm_create" eval="True"/>
    <field name="perm_unlink" eval="True"/>
</record>
</odoo>

